<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="KFGL.jpg">
<title>Member Events</title>
<link rel="stylesheet" href="style.css">

<style>
:root {
  --pink:#F68686;
  --light:#FDD7D7;
  --muted:#666;
  --radius:14px;
  --max:1200px;
}

* {box-sizing:border-box;}

body {
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
  background: linear-gradient(180deg,var(--pink),#fff);
  color:#333;
}

header { text-align:center; padding:1rem; }
header img { width:100%; max-height:360px; object-fit:cover; border-radius:var(--radius);}
header h1 { color:var(--pink); margin:1rem 0 .25rem;}
header p { color:var(--muted); margin:0;}

nav {
  display:flex; flex-wrap:wrap; justify-content:center; gap:.5rem; margin:1rem 0;
}
nav a {
  text-decoration:none; padding:.5rem .9rem; background:#fff; color:var(--pink); border-radius:20px;
  font-weight:600; font-size:.95rem;
}
nav a:hover { background:var(--pink); color:#fff; }

.wrapper { display:flex; max-width:var(--max); margin:auto; padding:1rem; gap:1.5rem; }
.sidebar { width:260px; background:#fff; border-radius:var(--radius); padding:1rem; }
.sidebar h5 { margin:.75rem 0; color:var(--pink); }
.sidebar a,.dropdown-btn {
  display:block; width:100%; padding:.6rem; margin:.2rem 0; background:#fff; color:var(--pink);
  border:none; text-align:left; font-size:.95rem; cursor:pointer;
}
.sidebar a:hover,.dropdown-btn:hover { background:var(--pink); color:#fff; }
.dropdown-container { display:none; padding-left:1rem; }

.menu-btn {
  display:none; position:fixed; top:10px; right:10px; z-index:2000; font-size:24px;
  padding:.4rem .7rem; border:none; background:var(--pink); color:#fff; border-radius:6px;
}

@media(max-width:900px){
  .wrapper { flex-direction:column; }
  .sidebar{ position:fixed; top:0; right:-280px; height:100vh; z-index:1500; transition:.3s; }
  .sidebar.active{ right:0; }
  .menu-btn{ display:block; }
}

/* Member avatar dropdown */
.member-avatar{ position:relative; margin-left:auto; }
.avatar-btn{ border:none; background:none; cursor:pointer; padding:0; }
.avatar-btn img{ width:42px; height:42px; border-radius:50%; object-fit:cover; border:2px solid #F68686; }
.member-dropdown{
  display:none; position:absolute; right:0; top:120%; background:#fff; width:220px;
  border-radius:14px; box-shadow:0 12px 30px rgba(0,0,0,.18); overflow:hidden; z-index:2000;
}
.member-name{ padding:.75rem 1rem; font-weight:600; color:#F68686; border-bottom:1px solid #eee; text-align:center; }
.member-dropdown a{ display:block; padding:.7rem 1rem; text-decoration:none; color:#444; font-size:.9rem; }
.member-dropdown a:hover{ background:#F68686; color:white; }
.member-dropdown .logout{ color:#c0392b; }
.member-dropdown .logout:hover{ background:#c0392b; color:white; }

.status { width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px; }
.online { background:#2ecc71; }
.offline { background:#aaa; }

.badge {
  position:absolute; top:-5px; right:-5px; background:red; color:white;
  font-size:12px; padding:2px 6px; border-radius:50%; display:none;
}

/* Dashboard cards */
.dashboard{ max-width:900px; margin:auto; padding:2rem; }
.card{ background:#fff; border-radius:14px; padding:1.5rem; margin-bottom:1rem; }
h1{color:#F68686}
a.button{ display:inline-block; padding:.6rem 1.2rem; border-radius:25px; background:#F68686; color:#fff; text-decoration:none; font-weight:600; }
#messengerToggle{
  position:fixed; bottom:20px; right:20px;
  background:#F68686; color:#fff;
  border:none; border-radius:50px;
  padding:.7rem 1.2rem;
  font-size:1.2rem; cursor:pointer;
  z-index:9999;
}

.badge{
  position:absolute; top:-6px; right:-6px;
  background:red; color:white;
  font-size:12px; padding:2px 6px;
  border-radius:50%; display:none;
}

#messengerModal{
  position:fixed; bottom:80px; right:20px;
  width:320px; height:460px;
  background:#fff; border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.3);
  display:none; flex-direction:column;
  z-index:10000;
}

#messengerHeader{
  background:#F68686; color:#fff;
  padding:.7rem; font-weight:600;
  display:flex; justify-content:space-between;
}

#membersList{
  max-height:70px; overflow:auto;
  padding:.4rem; border-bottom:1px solid #eee;
}

.member{
  display:flex; align-items:center;
  gap:.4rem; cursor:pointer;
}

.status{
  width:8px; height:8px;
  border-radius:50%;
}
.online{ background:#2ecc71 }
.offline{ background:#aaa }

#messages{
  flex:1; padding:.5rem;
  overflow-y:auto; font-size:.9rem;
}

.message.self{ text-align:right }
.message img{ max-width:180px; border-radius:8px }

.chat-input{
  display:flex; gap:4px;
  padding:.4rem;
}

#chatInput{ flex:1; padding:.4rem }

#emojiPicker{
  display:none; padding:.4rem;
  flex-wrap:wrap; gap:4px;
}
#emojiPicker span{ cursor:pointer }

#membersListPopup { padding: 0.5rem; border-bottom: 1px solid #eee; max-height: 80px; overflow-y: auto; }
#membersListPopup .memberItem { display: flex; align-items: center; gap: 0.5rem; padding: 0.2rem 0; cursor: pointer; }
#membersListPopup .memberItem:hover { background: #FDD7D7; border-radius:6px; }

#chatWindowPopup { flex:1; padding:0.5rem; overflow-y:auto; }
.message.self { text-align:right; }
.message.other { text-align:left; }
.message img.msgAvatar { width:30px; height:30px; border-radius:50%; margin-right:4px; vertical-align:middle; }

#chatInputPopup { border:1px solid #ccc; padding:0.5rem; width:calc(100% - 60px); margin:0.3rem; border-radius:12px; }
#sendBtnPopup { background:#F68686; color:#fff; border:none; padding:0.5rem 0.8rem; border-radius:12px; cursor:pointer; margin-right:0.3rem; }
 
document.getElementById("hostSignupForm").addEventListener("submit", e => {
  e.preventDefault();
  document.getElementById("hostMsg").textContent =
    "Thank you! Your host application has been received.";
  document.getElementById("hostMsg").style.color = "green";
  e.target.reset();
});

</style>
</head>
<body>
  <button id="messengerToggle">ðŸ’¬</button>
<button class="menu-btn" onclick="toggleMenu()">â˜°</button>

<header>
  <img src="01126.jpg" alt="Flowers of the Okanagan">
  <h1>Kelowna Flower Gardens</h1>
  <p>Kelownaâ€™s Flower Garden Club</p>
  <nav>
    <a href="MemberHome.html">Main</a>
    <a href="MemberGardenDesign.html">Garden Design</a>
    <a href="MemberAbout.html">About</a>
    <a href="MemberRegional Species.html">Regional Species</a>
    <a href="MemberAwards.html">Awards</a>
    <a href="MemberRoses.html">Roses</a>
    <a href="MemberValley Art.html">Valley Art</a>
    <a href="MemberBridalBouquets.html">Bridal Bouquets</a>
        <a href="MemberEvents.html">Events</a>
    <a href="MemberResources.html">Resources</a>
    <a href="MemberCalendar.html">Calendar</a>
    <a href="MembersDashboard.html">Members</a>
    <a href="MemberContact.html">Contact</a>
  </nav>
  <div class="nav-auth" id="nav-auth"></div>
</header>

<div class="wrapper">
  <div class="dashboard">
  <div class="card">
      <ul>
<div class="wrapper">
  <div class="dashboard"> 

      <div class="card">
  <h3> Upcoming Events</h3>
  <ul>May 1st Official Launch! </ul>
          <ul> First Garden Party May 31st 2026 </ul>
  <li </li> 
    <button id="rsvpBtn"
        data-event="First Garden Party May 30th 2026"
        class="rsvp-btn">
  ðŸŒ¸ RSVP
</button>

</ul>
</div>
      
    <div class="card">
     <section class="content-section form-section centered">
  <h2>Host Sign Up</h2>

  <form id="hostSignupForm" enctype="multipart/form-data">

    <label>
      Name
      <input type="text" name="name" required>
    </label>

    <label>
      Location
      <input type="text" name="location" placeholder="City or Address" required>
    </label>

    <label>
      Preferred Date
      <input type="date" name="preferredDate" required>
    </label>

    <label>
      Venue Size
      <input type="text" name="venueSize" placeholder="Approx. number of guests" required>
    </label>

    <label>
      Description
      <textarea
        name="description"
        rows="6"
        placeholder="Tell us about your garden, accessibility, parking, and anything else we should know"
        required></textarea>
    </label>

    <label>
      Upload Image
      <input type="file" name="image" accept="image/*">
    </label>

    <button type="submit">Submit Host Application</button>

    <p id="hostMsg" style="margin-top:1rem;text-align:center;"></p>
  </form>
       <style>
         textarea {
  width: 100%;
  padding: .6rem;
  margin-top: .4rem;
  border-radius: 8px;
  border: 1px solid #ccc;
  resize: vertical;
  font-family: inherit;
}
       </style>
      
<script>
document.getElementById("hostSignupForm").addEventListener("submit", async e => {
  e.preventDefault();

  const formData = new FormData(e.target);

  const res = await fetch("http://localhost:3000/api/host-signup", {
    method: "POST",
    body: formData
  });

  const msg = document.getElementById("hostMsg");

  if (res.ok) {
    msg.textContent = "Thank you! Your host application has been sent.";
    msg.style.color = "green";
    e.target.reset();
  } else {
    msg.textContent = "Submission failed. Please try again.";
    msg.style.color = "red";
  }
});
</script>

</section>

    </div>

</div>
<div class="card">
<div id="messengerModal">
  <div id="messengerHeader">
    ðŸ’¬ Members Chat
    <span id="closeMessenger">Ã—</span>
  </div>
  <div id="messagesPopup"></div>
  <input id="chatInputPopup">
  <button id="sendBtnPopup">Send</button>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

const toggleBtn = document.getElementById("messengerToggle");
const modal = document.getElementById("messengerModal");
const closeBtn = document.getElementById("closeMessenger");

toggleBtn.onclick = () => modal.style.display = "flex";
closeBtn.onclick = () => modal.style.display = "none";
</script>
<button id="messengerToggle">ðŸ’¬
  <span id="chatBadge" class="badge"></span>
</button>

  <div id="messengerHeader">
    Members Chat
    <span id="closeMessenger">Ã—</span>
  </div>

  <div id="membersList"></div>

  <div id="messages"></div>
  <div id="typingIndicator"></div>

  <div class="chat-input">
    <input id="chatInput" placeholder="Type a messageâ€¦" />
    <button id="emojiBtn">ðŸ˜Š</button>
    <button id="imageBtn">ðŸ“·</button>
    <button id="sendBtn">Send</button>
    <input type="file" id="imageInput" accept="image/*" hidden>
  </div>

  <div id="emojiPicker"></div>
</div>
<script>
const socket = io();

const modal = document.getElementById("messengerModal");
const toggleBtn = document.getElementById("messengerToggle");
const closeBtn = document.getElementById("closeMessenger");
const messagesDiv = document.getElementById("messages");
const membersList = document.getElementById("membersList");
const chatInput = document.getElementById("chatInput");
const sendBtn = document.getElementById("sendBtn");
const emojiBtn = document.getElementById("emojiBtn");
const imageBtn = document.getElementById("imageBtn");
const imageInput = document.getElementById("imageInput");
const typingDiv = document.getElementById("typingIndicator");
const badge = document.getElementById("chatBadge");
const emojiPicker = document.getElementById("emojiPicker");

let currentRoom = "general";
let unread = 0;

// Toggle modal
toggleBtn.onclick = () => {
  modal.style.display = "flex";
  unread = 0;
  badge.style.display = "none";
};
closeBtn.onclick = () => modal.style.display = "none";

// Send message
sendBtn.onclick = sendMessage;
chatInput.onkeypress = e => e.key==="Enter" && sendMessage();

function sendMessage(){
  const text = chatInput.value.trim();
  if(!text) return;
  socket.emit("chatMessage",{room:currentRoom,text,type:"text"});
  chatInput.value="";
}

// Typing indicator
let typingTimer;
chatInput.oninput = () => {
  socket.emit("typing", currentRoom);
  clearTimeout(typingTimer);
  typingTimer = setTimeout(()=>socket.emit("stopTyping",currentRoom),800);
};

// Emoji picker
["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ¥°","ðŸ˜Ž","ðŸ‘","ðŸŽ‰","ðŸŒ¹"].forEach(e=>{
  const s=document.createElement("span");
  s.textContent=e;
  s.onclick=()=>chatInput.value+=e;
  emojiPicker.appendChild(s);
});
emojiBtn.onclick = ()=>emojiPicker.style.display =
  emojiPicker.style.display==="flex"?"none":"flex";

// Image send
imageBtn.onclick=()=>imageInput.click();
imageInput.onchange=()=>{
  const file=imageInput.files[0];
  const r=new FileReader();
  r.onload=e=>socket.emit("chatMessage",{room:currentRoom,text:e.target.result,type:"image"});
  r.readAsDataURL(file);
};

// Receive messages
socket.on("chatMessage",msg=>{
  const div=document.createElement("div");
  div.className="message "+(msg.self?"self":"other");
  div.innerHTML = msg.type==="image"
    ? `<img src="${msg.text}"> âœ”âœ”`
    : `${msg.text} âœ”âœ”`;
  messagesDiv.appendChild(div);
  messagesDiv.scrollTop=messagesDiv.scrollHeight;

  if(modal.style.display!=="flex"){
    unread++;
    badge.textContent=unread;
    badge.style.display="inline-block";
  }
});

// Typing events
socket.on("typing",u=>typingDiv.textContent=u+" is typingâ€¦");
socket.on("stopTyping",()=>typingDiv.textContent="");

// Online members
socket.on("members",members=>{
  membersList.innerHTML="";
  members.forEach(m=>{
    const d=document.createElement("div");
    d.className="member";
    d.innerHTML=`<span class="status ${m.online?'online':'offline'}"></span>${m.username}`;
    d.onclick=()=>{
      currentRoom=[m.username,"YOU"].sort().join("#");
      messagesDiv.innerHTML="";
    };
    membersList.appendChild(d);
  });
});
</script>
  <script>
<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();

const sendBtn = document.getElementById("sendBtn");
const input = document.getElementById("chatInput");
const messages = document.getElementById("messages");

sendBtn.onclick = () => {
  socket.emit("chatMessage", input.value);
  input.value = "";
};

socket.on("message", msg => {
  const div = document.createElement("div");
  div.textContent = `${msg.username}: ${msg.text}`;
  messages.appendChild(div);
});

socket.on("history", msgs => {
  msgs.forEach(m => {
    const div = document.createElement("div");
    div.textContent = `${m.username}: ${m.text}`;
    messages.appendChild(div);
  });
});
</div>
  </div>
</script>
</script>
</body>
</html>
      </ul>
    </div>

    <div class="card">
      <a class="button" href="MemberRoses.html">View Rose Database</a>
      <a class="button" href="MemberCalendar.html">Events Calendar</a>
      <a class="button" href="MyAccount.html">My Account</a>
    </div>
  </div>
</div>

</script>

</body>
</html>
