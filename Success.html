<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="KFGL.jpg">
<title>Welcome!</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body{
  font-family:system-ui;
  background:#FDD7D7;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.card{
  background:white;
  padding:2rem;
  border-radius:16px;
  text-align:center;
}
    .tick-option {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-top: 12px;
  font-weight: 500;
}

.tick-option input {
  width: 18px;
  height: 18px;
}

.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 3000;
}

.popup-box {
  background: #fff;
  padding: 25px;
  width: 90%;
  max-width: 420px;
  border-radius: 16px;
}
.popup-overlay {
  pointer-events: all;
}

.card {
  pointer-events: none;
}

</style>
</head>

<body>

<!-- POPUP OVERLAY -->
<div id="popupOverlay" class="popup-overlay">
  <div class="popup-box">
    <h3>Required Before Continuing</h3>

    <label class="tick-option">
      <input type="checkbox" id="agreeCheck">
      I agree and have read the
      <a href="Waiver.pdf" target="_blank">Terms & Conditions / Liability Waiver</a>
    </label>

      <button id="continueBtn" type="button" disabled>Continue</button>
  </div>
</div>

<div class="card">
  <h2>Welcome to the Garden ðŸŒ¸</h2>
  <p>Your membership is active.</p>
<button id="dashboardBtn" disabled>Go to Dashboard</button>
</div>

</body>
    <script>
document.addEventListener("DOMContentLoaded", () => {
  const overlay = document.getElementById("popupOverlay");
  const agree = document.getElementById("agreeCheck");
  const continueBtn = document.getElementById("continueBtn");
  const dashboardBtn = document.getElementById("dashboardBtn");

  // Force popup open
  overlay.style.display = "flex";
  document.body.style.overflow = "hidden";

  agree.addEventListener("change", () => {
    continueBtn.disabled = !agree.checked;
  });

  continueBtn.addEventListener("click", async () => {
    // Save selection + notify admin
    await fetch("http://localhost:3000/api/member-selection", {
      method: "POST",
      credentials: "include",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        accepted: true,
        timestamp: new Date().toISOString()
      })
    });

    // Unlock page
    overlay.style.display = "none";
    document.body.style.overflow = "auto";

    dashboardBtn.disabled = false;
  });

  dashboardBtn.addEventListener("click", () => {
    window.location.href = "MembersDashboard.html";
  });
});
</script>

    <script>
const checkboxes = document.querySelectorAll("input[name='selection']");
const btn = document.getElementById("continueBtn");

checkboxes.forEach(cb => {
  cb.addEventListener("change", () => {
    btn.disabled = ![...checkboxes].some(c => c.checked);
  });
});
</script>
    <script>
document.getElementById("selectionForm").addEventListener("submit", async e => {
  e.preventDefault();

  const selections = [...document.querySelectorAll("input[name='selection']:checked")]
    .map(cb => cb.value);

  const res = await fetch("http://localhost:3000/api/member-selection", {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ selections })
  });

  if (res.ok) {
    document.getElementById("msg").textContent =
      "Selection saved. You may continue.";
    window.location.href = "NextPage.html";
  }
});
</script>

    <script>
async function submitSelection() {
  const checked = [...document.querySelectorAll(
    '.popup-box input[type="checkbox"]:checked'
  )].map(cb => cb.value);

  if (checked.length === 0) {
    alert("Please select at least one option.");
    return;
  }

  const res = await fetch("http://localhost:3000/api/member-selection", {
    method: "POST",
    credentials: "include",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ selections: checked })
  });

  if (res.ok) {
    closePopup();
    alert("Selection saved.");
  } else {
    alert("Error saving selection.");
  }
}
</script>

</html>
